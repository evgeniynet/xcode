<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta property="og:title" content="SherpaDesk | Track Time and Customer Support Management System">  <meta property="og:description" content="SherpaDesk is a help desk solution for all your customer support management needs. Manage tickets, track time, and send invoices easily.">
    <link rel="apple-touch-icon" href="img/icon.png"/>
    <link rel="apple-touch-startup-image" href="img/profile_2.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <title>SherpaDesk Mobile App</title>
    <!-- Media query for tablets -->
    <link rel="stylesheet" href="css/tablet.css" />
    <link rel="stylesheet" href="css/style_LargeScreen.css" />
    <link rel="stylesheet" type="text/css" href="css/error.css">
    <link md-href="https://m.sherpadesk.com/build/css/app.md.css" rel="stylesheet">
    <link wp-href="https://m.sherpadesk.com/build/css/app.wp.css" rel="stylesheet">
    <style>

        body {
          background: #34495e;
              padding-top: constant(safe-area-inset-top); /* iOS 11.0 */
              padding-top: env(safe-area-inset-top); /* iOS 11.2 */
      }

      ion-app1 ion-page {
        opacity: 0.4 ;
        transition: all linear 1700ms ;
        -webkit-transition: all linear 1700ms ;
    }
    ion-app1.loaded ion-page{
        opacity: 1.0 ;
    }

    .Absolute-Center {
        margin: auto;
        position: absolute;
        top: 0; left: 0; bottom: 0; right: 0;
    }

</style>
<script src="cordova.js"></script>
</head>
<body class="platform-cordova ios platform-mobile platform-ios platform-mobileweb login">
  <ion-app>

  </ion-app>
  <ion-app1>
    <img id=preload class=Absolute-Center src=img/loading2.gif alt="Loading...">
</ion-app1>
<click-block></click-block><focus-ctrl aria-hidden="true"></focus-ctrl>

</body>
<script type="text/javascript">
    
    localStorage.setItem("isPhonegap", "true");
    localStorage.setItem("isIos", "true");
    
    var element = document.createElement("script");
    element.src = "https://m.sherpadesk.com/build/js/app.js";
    document.body.appendChild(element);
    
    var styleElem = document.createElement('style');
    styleElem.type = 'text/css' ;
    
    var css = '@font-face{font-family:"Ionicons";src:url("build/fonts/ionicons.woff2?v=3.0.0-alpha.3") format("woff2"),url("build/fonts/ionicons.woff?v=3.0.0-alpha.3") format("woff"),url("build/fonts/ionicons.ttf?v=3.0.0-alpha.3") format("truetype");font-weight:normal;font-style:normal}';
    
    if(styleElem.styleSheet){
        styleElem.styleSheet.cssText = css;
    }
else{
    styleElem.appendChild(document.createTextNode(css));
}

// Append the Style element to the Head
var head = document.getElementsByTagName('head')[0] ;
head.appendChild(styleElem);

    var Site = 'sherpadesk.com/';
    var MobileSite = 'http://m.sherpadesk.com/';
    var isPhonegap = true;
    var isOnline = true;
    var interval;

    redirectToPage()

    function onLoad() {
        document.addEventListener("offline", off,false);
        document.addEventListener("online", on1 ,false);
        redirectToPage();
        //document.addEventListener("deviceready", onDeviceReady, false);
    }
    
    
    //If User is Offline....................................
    function off(){
        if (!document.getElementById("error")) {
            var el = document.getElementsByTagName("body")[0];
            el.innerHTML =  '<div id=error class="catch-error"><div class="catch-error-description"><h2><br/>Check your internet connection!</h2><div id="ctl00_PageBody_StackTrace" class="return-button"><center><button style="width: 200px;" onclick="redirectToPage()" class="sherpadesk-button">Refresh</button></center><p /><p /><h4>P.S.  Uh... a Yeti just attacked your  camp!</h4></div></div>';
        }
        isOnline = false;
    };
    
    var ios_action = "";
    
    function on1 (){
        if (!isOnline){
            setTimeout(function(){ ;
             document.location.reload(true);
         }, 500);
        }
        isOnline = true; };

        

        function redirectToPage() {
            if (navigator.onLine)
            {       
                var img = document.body.appendChild(document.createElement("img"));
                img.style.display = 'none';
                img.onerror = function () {
                    off();
                };
                img.onload = function () {
                    on1();
                };
                img.src = MobileSite + "img/select_arrow.png?rand=" + Math.random();
            }
            else
            {
                off();
            }
        };

    /*
    function handleOpenURL(url) {
        ios_action = url.substring(13);
        redirectToPage();
        //document.location.href = MobileSite + "index.html?ios_action=" + ios_action;
    }*/
</script>
</html>
